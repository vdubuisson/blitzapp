<ng-container *ngIf="round() as currentRound">
  <div class="round-header">
    <div class="round-subtitle">
      <span *ngIf="isBeforeGame(); else daySubtitle">Avant-partie</span>
      <ng-template #daySubtitle>
        <span class="day-icon"
          >{{ currentRound.isDuringDay ? '☀️' : '🌙' }}</span
        >
        {{ currentRound.isDuringDay ? 'Jour' : 'Nuit' }} {{ dayCount() }}
        <span class="day-icon"
          >{{ currentRound.isDuringDay ? '☀️' : '🌙' }}</span
        >
      </ng-template>
    </div>
    <hr />
    <div class="round-title">{{ currentRound.role | roundName }}</div>
  </div>

  <div class="player-list">
    <lgmj-player
      *ngFor="let player of players(); trackBy: playerTrackBy"
      [player]="player"
      [displayMode]="playerDisplayMode() === PlayerDisplayModeEnum.EDIT_ROLE && !currentRound.selectablePlayers.includes(player.id) ? PlayerDisplayModeEnum.DEFAULT : playerDisplayMode()"
      [disabled]="!currentRound.selectablePlayers.includes(player.id)"
      [checked]="playerDisplayMode() === PlayerDisplayModeEnum.SELECT_MULTI ? selectedPlayers().has(player.id) : selectedPlayer() === player.id"
      [noSelfRole]="true"
      [selectableRoles]="currentRound.selectableRoles || []"
      (checkedChange)="onPlayerChecked(player.id, $event)"
      (roleChange)="onRoleSelect($event)"
    />
  </div>

  <div class="submit-block">
    <button
      class="btn success"
      [disabled]="submitDisabled()"
      (click)="onSubmit()"
    >
      VALIDER
    </button>
    <button
      *ngIf="displayEqualityButton()"
      class="btn warning"
      (click)="onEquality()"
    >
      EGALITE
    </button>
  </div>
</ng-container>
