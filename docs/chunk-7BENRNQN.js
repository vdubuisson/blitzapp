import{j as d,n as m}from"./chunk-REGEYB5P.js";import{d as p}from"./chunk-J6W7A42Q.js";import{Q as y,V as i,ea as c}from"./chunk-FDHCW5RC.js";import{a as l,b as o}from"./chunk-2NFLSA4Y.js";var P=class n{gameOrchestrator=i(m);router=i(p);currentGamePlayers=i(d).state.asReadonly();players=c([]);currentPlayers=this.players.asReadonly();addPlayer(a){let e=this.players(),r={id:e.length,name:a,role:"NOT_SELECTED",card:"NOT_SELECTED",statuses:new Set,isDead:!1};this.players.set([...e,r])}removePlayer(a){let e=this.players();e.splice(a,1);let r=this.reindexPlayers(e);this.players.set(r)}reorderPlayers(a,e){let r=this.players(),t=r.splice(a,1)[0];r.splice(e,0,t);let s=this.reindexPlayers(r);this.players.set(s)}replay(){let e=[...this.currentGamePlayers()].map(r=>o(l({},r),{role:"NOT_SELECTED",card:"NOT_SELECTED",statuses:new Set,isDead:!1}));this.players.set(e),this.router.navigate(["roles-choice"])}changeRole(a,e){let r=[...this.players()],t=r.findIndex(s=>s.id===a);if(t>-1){let s=o(l({},r[t]),{role:e,card:e});r[t]=s,this.players.set(r)}}createGame(){this.gameOrchestrator.createGame(this.players()),this.players.set([])}reindexPlayers(a){return[...a].map((e,r)=>o(l({},e),{id:r}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=y({token:n,factory:n.\u0275fac,providedIn:"root"})};export{P as a};
