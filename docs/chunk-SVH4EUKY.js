import{a as M,b as J}from"./chunk-IK3VN6WQ.js";import{a as K}from"./chunk-KGFMD6BK.js";import{k as $}from"./chunk-2MS6TCI3.js";import{c as Y}from"./chunk-EFH6HX73.js";import{a as G,b as Q,c as b}from"./chunk-F5TIAXDW.js";import{b as j,d as q,l as H}from"./chunk-6TFKRWKD.js";import{Ab as R,C as k,Db as F,Eb as s,Fb as U,Gb as A,Na as m,Oa as f,Pa as D,Qa as N,Ra as I,Rb as B,Sa as c,Ta as r,Ua as d,V as C,Va as _,Z as p,_ as y,_a as E,ab as P,ba as O,cb as a,ea as x,jb as w,kb as L,nb as V,pa as l,pb as h,qb as v,tb as z,vb as u,wb as g,ya as T}from"./chunk-FDHCW5RC.js";var S=(i=>(i[i.DEFAULT=0]="DEFAULT",i[i.SELECT_SINGLE=1]="SELECT_SINGLE",i[i.SELECT_MULTI=2]="SELECT_MULTI",i[i.EDIT_ROLE=3]="EDIT_ROLE",i))(S||{});var X=["checkbox"];function Z(t,n){if(t&1&&_(0,"fa-icon",2),t&2){let e=a();c("icon",e.deadIcon)}}function ee(t,n){if(t&1){let e=E();_(0,"label",7),r(1,"input",8,0),P("change",function(){p(e);let i=a(2);return y(i.onCheckedChange())})("click",function(){p(e);let i=a(2);return y(i.onCheckboxClick())}),d()}if(t&2){let e=a(2);c("for","input-"+e.player().id),l(),c("id","input-"+e.player().id)("type",e.displayMode()===e.playerDisplayModeEnum.SELECT_SINGLE?"radio":"checkbox")("checked",e.checked())("disabled",e.disabled())}}function te(t,n){if(t&1&&m(0,ee,3,5),t&2){let e=a();f(e.displayMode()===e.playerDisplayModeEnum.SELECT_MULTI||e.displayMode()===e.playerDisplayModeEnum.SELECT_SINGLE?0:-1)}}function ne(t,n){if(t&1&&(_(0,"img",3),u(1,"playerRoleImage"),u(2,"playerRoleName")),t&2){let e=a();c("ngSrc",g(1,4,e.displayedRole()))("alt",g(2,6,e.displayedRole()))("width",55)("height",55)}}function oe(t,n){if(t&1){let e=E();r(0,"div",9),P("click",function(){p(e);let i=a();return y(i.openSelectRoleOverlay())})("keyup.enter",function(){p(e);let i=a();return y(i.openSelectRoleOverlay())}),d(),_(1,"fa-icon",10)}if(t&2){let e=a();l(),c("icon",e.selectIcon)}}function ie(t,n){if(t&1&&(r(0,"span",11),h(1),u(2,"playerStatusIcon"),d()),t&2){let e=n.$implicit;l(),v(g(2,1,e))}}function ae(t,n){if(t&1&&(r(0,"div"),N(1,ie,3,3,"span",11,D),d()),t&2){let e=a();l(),I(e.sortedStatuses())}}var W=class t{player=s.required();displayMode=s(0);disabled=s(!1);noSelfRole=s(!1);selectableRoles=s([]);checked=A(!1);roleChange=F();checkboxElement=U("checkbox");playerRoleNamePipe=C(b);selectOverlayManager=C(K);destroyRef=C(O);playerDisplayModeEnum=S;playerRoleEnum=G;deadIcon=q;selectIcon=H;sortedRoles=R(()=>{let n=[...this.selectableRoles()];return!this.noSelfRole()&&this.player().role!=="NOT_SELECTED"&&!n.includes(this.player().role)&&n.push(this.player().role),n.sort((e,o)=>this.playerRoleNamePipe.transform(e).localeCompare(this.playerRoleNamePipe.transform(o))),n});sortedStatuses=R(()=>Array.from(this.player().statuses).toSorted((n,e)=>M.indexOf(n)-M.indexOf(e)));displayedRole=R(()=>this.displayMode()===3&&this.selectedRole()!==void 0?this.selectedRole():this.player().role);selectedRole=x(void 0);selectionOpened=x(!1);onCheckedChange(){this.checked.set(this.checkboxElement()?.nativeElement.checked??!1)}onCheckboxClick(){this.checked()&&this.displayMode()===1&&this.checked.set(!1)}openSelectRoleOverlay(){let n={header:"CHOISIR UN R\xD4LE",options:this.sortedRoles().map(e=>({value:e,label:this.playerRoleNamePipe.transform(e),active:e===this.player().role}))};this.selectOverlayManager.selectedValue.pipe(k(1),Y(this.destroyRef)).subscribe(e=>{this.selectionOpened.set(!1),this.selectedRole.set(e),e!==void 0&&this.roleChange.emit(e)}),this.selectOverlayManager.openOverlay(n),this.selectionOpened.set(!0)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=T({type:t,selectors:[["lgmj-player-card"]],viewQuery:function(e,o){e&1&&w(o.checkboxElement,X,5),e&2&&L()},inputs:{player:[1,"player"],displayMode:[1,"displayMode"],disabled:[1,"disabled"],noSelfRole:[1,"noSelfRole"],selectableRoles:[1,"selectableRoles"],checked:[1,"checked"]},outputs:{checked:"checkedChange",roleChange:"roleChange"},features:[z([b])],decls:12,vars:13,consts:[["checkbox",""],[1,"player"],["size","xl",3,"icon"],[1,"role-img",3,"ngSrc","alt","width","height"],[1,"info"],[1,"name"],[1,"role"],[1,"label",3,"for"],[1,"form-control",3,"change","click","id","type","checked","disabled"],["tabindex","0",1,"label",3,"click","keyup.enter"],[3,"icon"],[1,"status-icon"]],template:function(e,o){e&1&&(r(0,"article",1),m(1,Z,1,1,"fa-icon",2)(2,te,1,1),m(3,ne,3,8,"img",3),r(4,"div",4)(5,"span",5),h(6),d(),r(7,"span",6),h(8),u(9,"playerRoleName"),d()(),m(10,oe,2,1)(11,ae,3,0,"div"),d()),e&2&&(V("disabled",o.player().isDead||o.disabled())("dead",o.player().isDead)("selection",o.selectionOpened()),l(),f(o.player().isDead?1:2),l(2),f(o.displayedRole()!==o.playerRoleEnum.NOT_SELECTED?3:-1),l(3),v(o.player().name),l(2),v(g(9,11,o.displayedRole())),l(2),f(o.displayMode()===o.playerDisplayModeEnum.EDIT_ROLE?10:11))},dependencies:[B,j,$,b,Q,J],styles:[".status-icon[_ngcontent-%COMP%]{font-size:20px}.player[_ngcontent-%COMP%]{align-items:center;border-bottom:1px solid var(--light-border-color);display:flex;gap:var(--spacing-1);min-height:55px;padding:var(--spacing-05) var(--spacing-1);position:relative}.player.disabled[_ngcontent-%COMP%]{opacity:.5}.player.dead[_ngcontent-%COMP%]{background-color:var(--dark-background-color);color:#fff}.player.selection[_ngcontent-%COMP%]{background-color:var(--light-background-color)}.player[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.player[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:var(--font-size-l)}.player[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:var(--font-size-m);font-weight:var(--font-weight-light)}.player[_ngcontent-%COMP%]   .form-control[type=checkbox][_ngcontent-%COMP%], .player[_ngcontent-%COMP%]   .form-control[type=radio][_ngcontent-%COMP%]{height:1.25rem;width:1.25rem}.player[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{height:100%;left:0;opacity:0;position:absolute;top:0;width:100%;z-index:1}"],changeDetection:0})};export{S as a,W as b};
