import{a as O,b as J}from"./chunk-6BMCZC2U.js";import{a as K}from"./chunk-HGFE67KZ.js";import{k as $}from"./chunk-UR35O2SI.js";import{c as Y}from"./chunk-IZXJ5OQA.js";import{a as G,b as Q,c as x}from"./chunk-U2Q7NHL3.js";import{b as j,c as q,g as H}from"./chunk-AWSUHQ36.js";import{C as b,Gb as F,Hb as U,Ib as g,Jb as E,Mb as A,Na as a,Ob as _,Pb as u,Va as I,W as C,Wa as w,Yb as v,_a as L,ba as s,ca as m,db as h,ga as M,kb as d,lb as D,ma as T,mc as B,na as p,nb as y,ob as N,pa as R,pb as V,qb as z,rb as r,sb as c,tb as f,wb as P,yb as S,zb as l}from"./chunk-GNHLBSKU.js";var k=(i=>(i[i.DEFAULT=0]="DEFAULT",i[i.SELECT_SINGLE=1]="SELECT_SINGLE",i[i.SELECT_MULTI=2]="SELECT_MULTI",i[i.EDIT_ROLE=3]="EDIT_ROLE",i))(k||{});var X=["checkbox"];function Z(t,n){if(t&1&&f(0,"fa-icon",2),t&2){let e=l();d("icon",e.deadIcon)}}function ee(t,n){if(t&1){let e=P();f(0,"label",7),r(1,"input",8,0),S("change",function(){s(e);let i=l(2);return m(i.onCheckedChange())})("click",function(){s(e);let i=l(2);return m(i.onCheckboxClick())}),c()}if(t&2){let e=l(2);d("for","input-"+e.player().id),a(),d("id","input-"+e.player().id)("type",e.displayMode()===e.playerDisplayModeEnum.SELECT_SINGLE?"radio":"checkbox")("checked",e.checked())("disabled",e.disabled())}}function te(t,n){if(t&1&&h(0,ee,3,5),t&2){let e=l();y(e.displayMode()===e.playerDisplayModeEnum.SELECT_MULTI||e.displayMode()===e.playerDisplayModeEnum.SELECT_SINGLE?0:-1)}}function ne(t,n){if(t&1&&(f(0,"img",3),_(1,"playerRoleImage"),_(2,"playerRoleName")),t&2){let e=l();d("ngSrc",u(1,4,e.displayedRole()))("alt",u(2,6,e.displayedRole()))("width",55)("height",55)}}function oe(t,n){if(t&1){let e=P();r(0,"div",9),S("click",function(){s(e);let i=l();return m(i.openSelectRoleOverlay())})("keyup.enter",function(){s(e);let i=l();return m(i.openSelectRoleOverlay())}),c(),f(1,"fa-icon",10)}if(t&2){let e=l();a(),d("icon",e.selectIcon)}}function ie(t,n){if(t&1&&(r(0,"span",11),g(1),_(2,"playerStatusIcon"),c()),t&2){let e=n.$implicit;a(),E(u(2,1,e))}}function le(t,n){if(t&1&&(r(0,"div"),V(1,ie,3,3,"span",11,N),c()),t&2){let e=l();a(),z(e.sortedStatuses())}}var W=class t{constructor(){this.player=p.required();this.displayMode=p(0);this.disabled=p(!1);this.noSelfRole=p(!1);this.selectableRoles=p([]);this.checked=w(!1);this.roleChange=T();this.checkboxElement=I("checkbox");this.playerRoleNamePipe=C(x);this.selectOverlayService=C(K);this.destroyRef=C(M);this.playerDisplayModeEnum=k;this.playerRoleEnum=G;this.deadIcon=H;this.selectIcon=q;this.sortedRoles=v(()=>{let n=[...this.selectableRoles()];return!this.noSelfRole()&&this.player().role!=="NOT_SELECTED"&&!n.includes(this.player().role)&&n.push(this.player().role),n.sort((e,o)=>this.playerRoleNamePipe.transform(e).localeCompare(this.playerRoleNamePipe.transform(o))),n});this.sortedStatuses=v(()=>Array.from(this.player().statuses).toSorted((n,e)=>O.indexOf(n)-O.indexOf(e)));this.displayedRole=v(()=>this.displayMode()===3&&this.selectedRole()!==void 0?this.selectedRole():this.player().role);this.selectedRole=R(void 0);this.selectionOpened=R(!1)}onCheckedChange(){this.checked.set(this.checkboxElement()?.nativeElement.checked??!1)}onCheckboxClick(){this.checked()&&this.displayMode()===1&&this.checked.set(!1)}openSelectRoleOverlay(){let n={header:"CHOISIR UN R\xD4LE",options:this.sortedRoles().map(e=>({value:e,label:this.playerRoleNamePipe.transform(e),active:e===this.player().role}))};this.selectOverlayService.selectedValue.pipe(b(1),Y(this.destroyRef)).subscribe(e=>{this.selectionOpened.set(!1),this.selectedRole.set(e),e!==void 0&&this.roleChange.emit(e)}),this.selectOverlayService.openOverlay(n),this.selectionOpened.set(!0)}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=L({type:t,selectors:[["lgmj-player"]],viewQuery:function(e,o){e&1&&F(o.checkboxElement,X,5),e&2&&U()},inputs:{player:[1,"player"],displayMode:[1,"displayMode"],disabled:[1,"disabled"],noSelfRole:[1,"noSelfRole"],selectableRoles:[1,"selectableRoles"],checked:[1,"checked"]},outputs:{checked:"checkedChange",roleChange:"roleChange"},features:[A([x])],decls:12,vars:13,consts:[["checkbox",""],[1,"player"],["size","xl",3,"icon"],[1,"role-img",3,"ngSrc","alt","width","height"],[1,"info"],[1,"name"],[1,"role"],[1,"label",3,"for"],[1,"form-control",3,"change","click","id","type","checked","disabled"],["tabindex","0",1,"label",3,"click","keyup.enter"],[3,"icon"],[1,"status-icon"]],template:function(e,o){e&1&&(r(0,"article",1),h(1,Z,1,1,"fa-icon",2)(2,te,1,1)(3,ne,3,8,"img",3),r(4,"div",4)(5,"span",5),g(6),c(),r(7,"span",6),g(8),_(9,"playerRoleName"),c()(),h(10,oe,2,1)(11,le,3,0,"div"),c()),e&2&&(D("disabled",o.player().isDead||o.disabled())("dead",o.player().isDead)("selection",o.selectionOpened()),a(),y(o.player().isDead?1:2),a(2),y(o.displayedRole()!==o.playerRoleEnum.NOT_SELECTED?3:-1),a(3),E(o.player().name),a(2),E(u(9,11,o.displayedRole())),a(2),y(o.displayMode()===o.playerDisplayModeEnum.EDIT_ROLE?10:11))},dependencies:[x,Q,J,B,j,$],styles:[".status-icon[_ngcontent-%COMP%]{font-size:20px}.player[_ngcontent-%COMP%]{align-items:center;border-bottom:1px solid var(--light-border-color);display:flex;gap:var(--spacing-1);min-height:55px;padding:var(--spacing-05) var(--spacing-1);position:relative}.player.disabled[_ngcontent-%COMP%]{opacity:.5}.player.dead[_ngcontent-%COMP%]{background-color:var(--dark-background-color);color:#fff}.player.selection[_ngcontent-%COMP%]{background-color:var(--light-background-color)}.player[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.player[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:var(--font-size-l)}.player[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:var(--font-size-m);font-weight:var(--font-weight-light)}.player[_ngcontent-%COMP%]   .form-control[type=checkbox][_ngcontent-%COMP%], .player[_ngcontent-%COMP%]   .form-control[type=radio][_ngcontent-%COMP%]{height:1.25rem;width:1.25rem}.player[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{height:100%;left:0;opacity:0;position:absolute;top:0;width:100%;z-index:1}"],changeDetection:0})}};export{k as a,W as b};
