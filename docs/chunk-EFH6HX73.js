import{a as D}from"./chunk-ZM6HYW2V.js";import{$ as v,Ab as x,Bb as b,F as h,M as w,O as p,Q as j,V as i,ba as u,c as m,ea as s,f as S}from"./chunk-FDHCW5RC.js";import{a,b as c}from"./chunk-2NFLSA4Y.js";var d=class{constructor(e,r){this.storageKey=e;this.defaultValue=r;this.state=s(this.defaultValue),this.initFromStorage()}storage=i(D);injector=i(v);state;initializedSubject=new S;initialized$=this.initializedSubject.asObservable();convertStateToStored(e){return e}convertStoredToState(e){return e}initFromStorage(){this.storage.get(this.storageKey).pipe(h()).subscribe(e=>{e!=null&&this.state.set(this.convertStoredToState(e)),this.initStorageSync(),this.initializedSubject.next(),this.initializedSubject.complete()})}initStorageSync(){b(()=>this.storage.set(this.storageKey,this.convertStateToStored(this.state())),{injector:this.injector})}};var C=class t extends d{constructor(){super("store.cardChoice",{villageois:0,loupGarou:0,playersNumber:0,selectedRoles:new Set})}convertStateToStored(e){return c(a({},e),{selectedRoles:Array.from(e.selectedRoles)})}convertStoredToState(e){return c(a({},e),{selectedRoles:new Set(e.selectedRoles)})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function J(t){t||(t=i(u));let e=new m(r=>{if(t.destroyed){r.next();return}return t.onDestroy(r.next.bind(r))});return r=>r.pipe(w(e))}function Q(t,e){let f=!e?.manualCleanup?e?.injector?.get(u)??i(u):null,y=T(e?.equal),o;e?.requireSync?o=s({kind:0},{equal:y}):o=s({kind:1,value:e?.initialValue},{equal:y});let l,g=t.subscribe({next:n=>o.set({kind:1,value:n}),error:n=>{o.set({kind:2,error:n}),l?.()},complete:()=>{l?.()}});if(e?.requireSync&&o().kind===0)throw new p(601,!1);return l=f?.onDestroy(g.unsubscribe.bind(g)),x(()=>{let n=o();switch(n.kind){case 1:return n.value;case 2:throw n.error;case 0:throw new p(601,!1)}},{equal:e?.equal})}function T(t=Object.is){return(e,r)=>e.kind===1&&r.kind===1&&t(e.value,r.value)}export{d as a,C as b,J as c,Q as d};
